---
import "medium-zoom/dist/style.css"
---

<script>
	import mediumZoom from "medium-zoom/dist/pure"

	window.mediumZoom = mediumZoom("[data-zoomable]", {
		margin: 24,
		background: window.matchMedia("(prefers-color-scheme: dark)").matches
			? "var(--darkbg)"
			: "var(--bg)",
	})
	console.log("MediumZoom initialized")

	document.addEventListener("astro:before-preparation", () => {
		window.mediumZoom.detach()
	})

	document.addEventListener("astro:page-load", () => {
		window.mediumZoom.attach("[data-zoomable]")
	})
</script>

<style is:global>
	.medium-zoom-overlay,
	.medium-zoom-image--opened {
		z-index: 900;
	}
</style>
