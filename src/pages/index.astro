---
import ytch from "yt-channel-info"
import getBlogPosts from "$utils/getBlogPosts"
import "$styles/home.scss"
import Chapter from "$components/home/Chapter.astro"
import Link from "$components/home/Link.astro"
import NinjaLink from "$components/home/NinjaLink.astro"
import { ViewTransitions } from "astro:transitions"

const articles = await getBlogPosts()
const lastArticles = articles
	.filter((article) => article.data.categories && article.data.categories.includes("Article"))
	.slice(0, 3)

const allo = await ytch.getChannelVideos({
	channelId: "GameDevAlliance",
	sortBy: "newest",
})

const videos = allo.items.slice(0, 3)
---

<!DOCTYPE html>
<html lang="fr" class="home">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Aurélien Dos Santos</title>
		<meta name="author" content="Aurélien Dos Santos" />
		<meta name="description" content="Site personnel d'Aurélien Dos Santos." />
		<meta name="generator" content={Astro.generator} />
		<link rel="canonical" href={Astro.url} />
		<link
			rel="alternate"
			type="application/rss+xml"
			href="/rss.xml"
			title="Blog d'Aurélien Dos Santos"
		/>
		<meta name="theme-color" content="#17182f" />
		<meta property="og:title" content="Aurélien Dos Santos" />
		<meta property="og:url" content={Astro.url} />
		<meta property="og:site_name" content="Aurélien Dos Santos" />
		<meta property="og:type" content="website" />
		<meta property="og:locale" content="fr_FR" />
		<meta property="og:description" content="Site personnel d'Aurélien Dos Santos." />
		<meta name="twitter:title" content="Aurélien Dos Santos" />
		<meta name="twitter:site" content="@ooooorelien" />
		<meta name="twitter:creator" content="@ooooorelien" />
		<meta name="twitter:description" content="Site personnel d'Aurélien Dos Santos." />
		<meta name="twitter:card" content="summary_large_image" />
		<ViewTransitions />
	</head>
	<body class="m-0 bg-[#17182f]">
		<div id="particles-js"></div>
		<div
			class="flex min-h-screen flex-col flex-wrap content-center items-start justify-center gap-6 font-space-grotesk text-[#9ca3af]"
		>
			<!--<h1 class="mb-8 whitespace-nowrap font-space-mono text-[1.7em] italic hover:text-[#8c95a4] active:text-[#828d9e]"><a href="/about">Aurélien Dos Santos</a></h1>-->
			<p class="relative mb-0 mt-20 max-w-[320px]">
				Je suis <NinjaLink text="Aurélien Dos Santos" label="/about" href="/about" />, ingénieur et
				concepteur pédagogique, réalisateur vidéo et développeur web/Unity.
			</p>
			<Chapter label="Portfolio" path="/portfolio" href="/portfolio" />
			<Chapter
				label="Vidéos"
				path="youtube.com"
				secondLabel="youtube.com"
				href="https://www.youtube.com/@GameDevAlliance"
				rel="me"
				newTab
			>
				<ul class="overflow max-w-[320px] overflow-visible">
					<li class="text-[13px]">
						<span class="text-[#656f7e] hover:text-[#5f6979] active:text-[#566272]"
							>Dernières vidéos</span
						>
					</li>
					{
						videos.map((video) => (
							<li class="secondary truncate font-space-mono  text-xs italic tracking-tight hover:overflow-visible">
								<a href={"https://youtu.be/" + video.videoId}>
									<span>{video.title}</span>
								</a>
							</li>
						))
					}
				</ul>
			</Chapter>
			<Chapter label="Blog" path="/blog" href="/blog">
				<ul style="max-width: 320px" class="overflow overflow-visible">
					<li class="text-[13px]">
						<span class="text-[#656f7e] hover:text-[#5f6979] active:text-[#566272]"
							>Derniers articles</span
						>
					</li>
					{
						lastArticles.map((article) => (
							<li class="secondary truncate font-space-mono text-xs italic tracking-tight hover:overflow-visible">
								<a href={"/blog/" + article.slug}>
									<span>{article.data.title}</span>
								</a>
							</li>
						))
					}
				</ul>
			</Chapter>
			<div class="chapter">
				<!--<h2>Réseaux</h2>-->
				<ul>
					<Link
						label="Mastodon"
						secondLabel="@aurelien"
						href="https://mastodon.gamedevalliance.fr/@aurelien"
						rel="me"
						newTab
					/>
					<Link
						label="GitHub"
						secondLabel="@aureliendossantos"
						href="https://github.com/aureliendossantos"
						rel="me"
						newTab
					/>
					<Link
						label="LinkedIn"
						secondLabel="in/aureliendossantos"
						href="https://www.linkedin.com/in/aureliendossantos/"
						rel="me"
						newTab
					/>
				</ul>
			</div>
			<p class="relative my-0 max-w-[320px]">
				À propos <NinjaLink text="de moi" label="/about" href="/about" /> et <NinjaLink
					text="de ce site"
					label="/website"
					href="/website"
				/>.
			</p>
			<p class="relative mb-20 mt-0 max-w-[320px]">
				Je suis en recherche d'emploi ! Voici <NinjaLink
					text="mes expériences pro"
					label="/pro"
					href="/pro"
				/>.
			</p>
		</div>
		<script src="/home/particlesjs2.0.0.min.js" is:inline></script>
		<script type="text/javascript" src="/home/starryBackground.js" is:inline></script>
	</body>
</html>
